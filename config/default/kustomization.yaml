apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Adds namespace to all resources.
namespace: awx-operator-system

# Value of this field is prepended to the
# names of all resources, e.g. a deployment named
# "wordpress" becomes "alices-wordpress".
namePrefix: awx-

# Labels to add to all resources and selectors.
commonLabels:
  app.kubernetes.io/name: awx-operator
  app.kubernetes.io/instance: awx-operator
  app.kubernetes.io/part-of: awx-operator
  app.kubernetes.io/managed-by: kustomize
  app.kubernetes.io/created-by: awx-operator

resources:
- namespace.yaml

bases:
- ../crd
- ../rbac
- ../manager

# [WEBHOOK] To enable webhook, uncomment all the sections with [WEBHOOK] prefix.
# Uncomment the following patches to enable webhook.
#- patches/webhook_in_awxinstances.yaml

# [CERTMANAGER] To enable cert-manager, uncomment all sections with 'CERTMANAGER'.
# Uncomment the following patches to enable the CA injector.
#- patches/cainjection_in_awxinstances.yaml

# Protect the /metrics endpoint by putting it behind auth.
# If you want your controller-manager to expose the /metrics
# endpoint w/o any authn/z, please comment the following line.
#- patches/auth_proxy_service.yaml

# Mount the controller config file for loading manager configurations
# through a ComponentConfig type
#- patches/manager_config_patch.yaml

patchesStrategicMerge: []

# the following config is for teaching kustomize how to do var substitution
vars:
- name: NAMESPACE
  objref:
    kind: Namespace
    name: awx-operator-system
    apiVersion: v1 